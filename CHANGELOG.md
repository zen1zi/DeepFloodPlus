# NSDF 助手更新日志

## v0.2.0 (2025-01-15)

### 新特性
- **错峰签到模式**: 在 `autoSignIn` 模块中新增错峰签到功能，支持可配置的随机延迟
- **自定义主题**: 在 `uiEnhance` 模块中新增主题颜色选择（紫色、绿色、橙色主题）
- **响应式布局**: 针对 NodeSeek 的移动端布局优化
- **内容格式检测**: `contentPreview` 模块支持 Markdown/BBCode 自动识别和渲染
- **回复模板系统**: `quickReply` 模块新增模板管理功能
- **键盘快捷键**: 支持 Alt+Enter 快速提交、Ctrl+T 插入模板等

### 基础设施改进
- **增强缓存机制**: 新增缓存失效日志、重试逻辑和错误处理
- **配置文件升级**: 添加 `checksum` 和 `lastUpdated` 字段支持远程比对
- **模块健康检查**: 新增开发者工具，可查看模块加载状态和性能
- **容错处理**: 改进模块加载失败后的降级机制

### 功能增强
- **autoSignIn**:
  - 支持多个备用签到接口
  - 增加自动重试机制（最多3次）
  - 新增最近签到时间显示
  - 错峰签到模式，随机延迟5-30分钟

- **uiEnhance**:
  - 新增4种预设主题颜色
  - 响应式布局优化（主要针对NodeSeek）
  - 改进暗色模式支持

- **contentPreview**:
  - 移动端检测，避免在窄屏过度占位
  - 支持 Markdown 和 BBCode 格式渲染
  - 自动识别站点默认格式
  - 增加渲染错误回退机制

- **quickReply**:
  - 新增回复模板管理器
  - 支持键盘快捷键操作
  - 模板内容支持 Markdown 格式
  - 改进模板选择器界面

### 技术债务清理
- 抽离 `fetchWithCache` 为可复用工具函数
- 改进错误捕获和日志记录
- 统一存储键命名规范（`df_` 前缀）
- 增加模块代码安全性检查

### 开发者体验
- 新增模块加载性能监控
- 改进开发者工具，支持缓存管理和模块健康检查
- 新增 Tampermonkey 菜单命令
- 降级启动机制，确保基础功能可用

### 修复问题
- 修复模块初始化顺序问题
- 改进缓存过期处理逻辑
- 优化模块间依赖关系
- 修复暗色模式下的样式问题

---

## v0.1.0 (2024-11-01)

### 初始版本
- 基础模块系统架构
- 支持 DeepFlood 和 NodeSeek 双站
- 基础功能：设置面板、自动签到、UI美化、快捷回复等
- 远程配置和模块缓存机制